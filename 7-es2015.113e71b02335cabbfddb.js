(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"5i6k":function(e,t,r){"use strict";r.r(t),r.d(t,"ManageModule",(function(){return v}));var o=r("ofXK"),i=r("tyNb"),n=r("fXoL");let a=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Db({type:e,selectors:[["app-manage"]],decls:2,vars:0,template:function(e,t){1&e&&(n.Mb(0,"p"),n.ic(1,"manage works!"),n.Lb())},styles:[""]}),e})();var s=r("JIr8"),c=r("vkgz"),u=r("2Vo4"),b=r("z6cu");class l{constructor(e,t,r,o){this.email=e,this.id=t,this._token=r,this._tokenExpirationDate=o}get token(){return!this._tokenExpirationDate||new Date>this._tokenExpirationDate?null:this._token}}var d=r("tk/3");let m=(()=>{class e{constructor(e,t){this.http=e,this.router=t,this.user=new u.a(null)}login(e,t){return this.http.post("https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyBEiibaR2k2HahXuX2euQfWwEqbegXLNyc",{email:e,password:t,returnSecureToken:!0}).pipe(Object(s.a)(this.handleError),Object(c.a)(e=>{this.handleAuth(e.email,e.localId,e.idToken,+e.expiresIn)}))}handleAuth(e,t,r,o){const i=new Date((new Date).getTime()+1e3*o),n=new l(e,t,r,i);this.user.next(n),this.autoLogout(1e3*o),localStorage.setItem("Info",JSON.stringify(n))}handleError(e){let t="An unknown error occured!";if(!e.error||!e.error.error)return Object(b.a)(t);switch(e.error.error.message){case"EMAIL_EXISTS":t="This Email Exists Already";break;case"EMAIL_NOT_FOUND":t="This Email Does not exists";break;case"INVALID_PASSWORD":t="Password is not correct."}return Object(b.a)(t)}autoLogin(){const e=JSON.parse(localStorage.getItem("Info"));if(!e)return;const t=new l(e.email,e.id,e._token,new Date(e._tokenExpirationDate));if(t.token){this.user.next(t);const r=new Date(e._tokenExpirationDate).getTime()-(new Date).getTime();this.autoLogout(r)}}logout(){this.user.next(null),this.router.navigate(["/auth"]),localStorage.removeItem("Info"),this.tokenExpirationTimer&&clearTimeout(this.tokenExpirationTimer),this.tokenExpirationTimer=null}autoLogout(e){this.tokenExpirationTimer=setTimeout(()=>{this.logout()},e)}}return e.\u0275fac=function(t){return new(t||e)(n.Qb(d.b),n.Qb(i.e))},e.\u0275prov=n.Fb({token:e,factory:e.\u0275fac}),e})();var h=r("3Pt+");const g=[{path:"",component:a},{path:"auth",component:(()=>{class e{constructor(e,t,r,o){this.authService=e,this.route=t,this.renderer=r,this._document=o,this.isLoading=!1}ngOnInit(){const e=this._document.getElementsByTagName("body")[0];this.renderer.setStyle(e,"padding","0")}onSubmit(e){if(!e.valid)return;const t=e.value.email,r=e.value.password;let o;this.isLoading=!0,o=this.authService.login(t,r),o.subscribe(e=>{this.isLoading=!1,this.route.navigate(["/account"])},e=>{this.error=e,this.isLoading=!1}),e.resetForm()}ngOnDestroy(){const e=this._document.getElementsByTagName("body")[0];this.renderer.removeStyle(e,"padding")}}return e.\u0275fac=function(t){return new(t||e)(n.Jb(m),n.Jb(i.e),n.Jb(n.D),n.Jb(o.c))},e.\u0275cmp=n.Db({type:e,selectors:[["app-auth"]],decls:25,vars:1,consts:[[1,"section-auth"],[1,"center-text","m-b-medium"],[1,"heading-secondary","heading-secondary--indigo","m-t-small"],[1,"columns"],[1,"column"],[1,"center-text","error"],[1,"form",3,"submit"],["authForm","ngForm"],[1,"form__group"],["type","email","id","email","name","email","placeholder","Email Address","required","","email","","ngModel","",1,"form__input"],["for","email",1,"form__label"],["type","password","id","password","name","password","placeholder","Password","required","","ngModel","",1,"form__input"],["for","password",1,"form__label"],[1,"form__group","center-text"],["type","submit",1,"btn","btn--indigo"]],template:function(e,t){if(1&e){const e=n.Nb();n.Mb(0,"section",0),n.Mb(1,"div",1),n.Mb(2,"h2",2),n.ic(3," Login "),n.Lb(),n.Lb(),n.Mb(4,"div",3),n.Mb(5,"div",4),n.ic(6,"\xa0"),n.Lb(),n.Mb(7,"div",4),n.Mb(8,"h2",5),n.ic(9),n.Lb(),n.Mb(10,"form",6,7),n.Tb("submit",(function(){n.ec(e);const r=n.cc(11);return t.onSubmit(r)})),n.Mb(12,"div",8),n.Kb(13,"input",9),n.Mb(14,"label",10),n.ic(15,"Email Address"),n.Lb(),n.Lb(),n.Mb(16,"div",8),n.Kb(17,"input",11),n.Mb(18,"label",12),n.ic(19,"Password"),n.Lb(),n.Lb(),n.Mb(20,"div",13),n.Mb(21,"button",14),n.ic(22,"Submit"),n.Lb(),n.Lb(),n.Lb(),n.Lb(),n.Mb(23,"div",4),n.ic(24,"\xa0"),n.Lb(),n.Lb(),n.Lb()}2&e&&(n.yb(9),n.jc(t.error))},directives:[h.j,h.f,h.g,h.a,h.i,h.b,h.e,h.h],styles:[".section-auth[_ngcontent-%COMP%]{background-image:-webkit-gradient(linear,right top,left bottom,from(#fff),color-stop(rgba(15,171,188,.34)),color-stop(rgba(24,77,71,.34)),to(#fff));background-image:linear-gradient(to left bottom,#fff,rgba(15,171,188,.34),rgba(24,77,71,.34),#fff);overflow-x:hidden;height:100vh}.form[_ngcontent-%COMP%]{background-color:#fff;-webkit-border-radius:.5rem;border-radius:.5rem;padding:8rem 1rem 8rem 2.5rem;-webkit-box-shadow:0 1rem 4rem rgba(0,0,0,.5);box-shadow:0 1rem 4rem rgba(0,0,0,.5)}.error[_ngcontent-%COMP%]{color:#cf4b32}"]}),e})()}];let p=(()=>{class e{}return e.\u0275mod=n.Hb({type:e}),e.\u0275inj=n.Gb({factory:function(t){return new(t||e)},imports:[[i.i.forChild(g)],i.i]}),e})();var f=r("IzEk"),w=r("lJxs");let k=(()=>{class e{constructor(e,t){this.authService=e,this.router=t}canActivate(e,t){return this.authService.user.pipe(Object(f.a)(1),Object(w.a)(e=>!!e||this.router.createUrlTree(["/auth"])))}}return e.\u0275fac=function(t){return new(t||e)(n.Qb(m),n.Qb(i.e))},e.\u0275prov=n.Fb({token:e,factory:e.\u0275fac}),e})(),v=(()=>{class e{}return e.\u0275mod=n.Hb({type:e}),e.\u0275inj=n.Gb({factory:function(t){return new(t||e)},providers:[k,m],imports:[[o.b,p,h.c]]}),e})()}}]);