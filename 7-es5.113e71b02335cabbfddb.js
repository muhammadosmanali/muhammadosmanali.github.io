function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"5i6k":function(e,t,n){"use strict";n.r(t),n.d(t,"ManageModule",(function(){return M}));var r,i,o,a,s,c,u=n("ofXK"),l=n("tyNb"),b=n("fXoL"),f=((r=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||r)},r.\u0275cmp=b.Db({type:r,selectors:[["app-manage"]],decls:2,vars:0,template:function(e,t){1&e&&(b.Mb(0,"p"),b.ic(1,"manage works!"),b.Lb())},styles:[""]}),r),h=n("JIr8"),d=n("vkgz"),m=n("2Vo4"),p=n("z6cu"),g=function(){function e(t,n,r,i){_classCallCheck(this,e),this.email=t,this.id=n,this._token=r,this._tokenExpirationDate=i}return _createClass(e,[{key:"token",get:function(){return!this._tokenExpirationDate||new Date>this._tokenExpirationDate?null:this._token}}]),e}(),v=n("tk/3"),k=((i=function(){function e(t,n){_classCallCheck(this,e),this.http=t,this.router=n,this.user=new m.a(null)}return _createClass(e,[{key:"login",value:function(e,t){var n=this;return this.http.post("https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyBEiibaR2k2HahXuX2euQfWwEqbegXLNyc",{email:e,password:t,returnSecureToken:!0}).pipe(Object(h.a)(this.handleError),Object(d.a)((function(e){n.handleAuth(e.email,e.localId,e.idToken,+e.expiresIn)})))}},{key:"handleAuth",value:function(e,t,n,r){var i=new Date((new Date).getTime()+1e3*r),o=new g(e,t,n,i);this.user.next(o),this.autoLogout(1e3*r),localStorage.setItem("Info",JSON.stringify(o))}},{key:"handleError",value:function(e){var t="An unknown error occured!";if(!e.error||!e.error.error)return Object(p.a)(t);switch(e.error.error.message){case"EMAIL_EXISTS":t="This Email Exists Already";break;case"EMAIL_NOT_FOUND":t="This Email Does not exists";break;case"INVALID_PASSWORD":t="Password is not correct."}return Object(p.a)(t)}},{key:"autoLogin",value:function(){var e=JSON.parse(localStorage.getItem("Info"));if(e){var t=new g(e.email,e.id,e._token,new Date(e._tokenExpirationDate));if(t.token){this.user.next(t);var n=new Date(e._tokenExpirationDate).getTime()-(new Date).getTime();this.autoLogout(n)}}}},{key:"logout",value:function(){this.user.next(null),this.router.navigate(["/auth"]),localStorage.removeItem("Info"),this.tokenExpirationTimer&&clearTimeout(this.tokenExpirationTimer),this.tokenExpirationTimer=null}},{key:"autoLogout",value:function(e){var t=this;this.tokenExpirationTimer=setTimeout((function(){t.logout()}),e)}}]),e}()).\u0275fac=function(e){return new(e||i)(b.Qb(v.b),b.Qb(l.e))},i.\u0275prov=b.Fb({token:i,factory:i.\u0275fac}),i),_=n("3Pt+"),y=[{path:"",component:f},{path:"auth",component:(o=function(){function e(t,n,r,i){_classCallCheck(this,e),this.authService=t,this.route=n,this.renderer=r,this._document=i,this.isLoading=!1}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this._document.getElementsByTagName("body")[0];this.renderer.setStyle(e,"padding","0")}},{key:"onSubmit",value:function(e){var t=this;if(e.valid){var n=e.value.email,r=e.value.password;this.isLoading=!0,this.authService.login(n,r).subscribe((function(e){t.isLoading=!1,t.route.navigate(["/account"])}),(function(e){t.error=e,t.isLoading=!1})),e.resetForm()}}},{key:"ngOnDestroy",value:function(){var e=this._document.getElementsByTagName("body")[0];this.renderer.removeStyle(e,"padding")}}]),e}(),o.\u0275fac=function(e){return new(e||o)(b.Jb(k),b.Jb(l.e),b.Jb(b.D),b.Jb(u.c))},o.\u0275cmp=b.Db({type:o,selectors:[["app-auth"]],decls:25,vars:1,consts:[[1,"section-auth"],[1,"center-text","m-b-medium"],[1,"heading-secondary","heading-secondary--indigo","m-t-small"],[1,"columns"],[1,"column"],[1,"center-text","error"],[1,"form",3,"submit"],["authForm","ngForm"],[1,"form__group"],["type","email","id","email","name","email","placeholder","Email Address","required","","email","","ngModel","",1,"form__input"],["for","email",1,"form__label"],["type","password","id","password","name","password","placeholder","Password","required","","ngModel","",1,"form__input"],["for","password",1,"form__label"],[1,"form__group","center-text"],["type","submit",1,"btn","btn--indigo"]],template:function(e,t){if(1&e){var n=b.Nb();b.Mb(0,"section",0),b.Mb(1,"div",1),b.Mb(2,"h2",2),b.ic(3," Login "),b.Lb(),b.Lb(),b.Mb(4,"div",3),b.Mb(5,"div",4),b.ic(6,"\xa0"),b.Lb(),b.Mb(7,"div",4),b.Mb(8,"h2",5),b.ic(9),b.Lb(),b.Mb(10,"form",6,7),b.Tb("submit",(function(){b.ec(n);var e=b.cc(11);return t.onSubmit(e)})),b.Mb(12,"div",8),b.Kb(13,"input",9),b.Mb(14,"label",10),b.ic(15,"Email Address"),b.Lb(),b.Lb(),b.Mb(16,"div",8),b.Kb(17,"input",11),b.Mb(18,"label",12),b.ic(19,"Password"),b.Lb(),b.Lb(),b.Mb(20,"div",13),b.Mb(21,"button",14),b.ic(22,"Submit"),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Mb(23,"div",4),b.ic(24,"\xa0"),b.Lb(),b.Lb(),b.Lb()}2&e&&(b.yb(9),b.jc(t.error))},directives:[_.j,_.f,_.g,_.a,_.i,_.b,_.e,_.h],styles:[".section-auth[_ngcontent-%COMP%]{background-image:-webkit-gradient(linear,right top,left bottom,from(#fff),color-stop(rgba(15,171,188,.34)),color-stop(rgba(24,77,71,.34)),to(#fff));background-image:linear-gradient(to left bottom,#fff,rgba(15,171,188,.34),rgba(24,77,71,.34),#fff);overflow-x:hidden;height:100vh}.form[_ngcontent-%COMP%]{background-color:#fff;-webkit-border-radius:.5rem;border-radius:.5rem;padding:8rem 1rem 8rem 2.5rem;-webkit-box-shadow:0 1rem 4rem rgba(0,0,0,.5);box-shadow:0 1rem 4rem rgba(0,0,0,.5)}.error[_ngcontent-%COMP%]{color:#cf4b32}"]}),o)}],w=((a=function e(){_classCallCheck(this,e)}).\u0275mod=b.Hb({type:a}),a.\u0275inj=b.Gb({factory:function(e){return new(e||a)},imports:[[l.i.forChild(y)],l.i]}),a),L=n("IzEk"),C=n("lJxs"),E=((c=function(){function e(t,n){_classCallCheck(this,e),this.authService=t,this.router=n}return _createClass(e,[{key:"canActivate",value:function(e,t){var n=this;return this.authService.user.pipe(Object(L.a)(1),Object(C.a)((function(e){return!!e||n.router.createUrlTree(["/auth"])})))}}]),e}()).\u0275fac=function(e){return new(e||c)(b.Qb(k),b.Qb(l.e))},c.\u0275prov=b.Fb({token:c,factory:c.\u0275fac}),c),M=((s=function e(){_classCallCheck(this,e)}).\u0275mod=b.Hb({type:s}),s.\u0275inj=b.Gb({factory:function(e){return new(e||s)},providers:[E,k],imports:[[u.b,w,_.c]]}),s)}}]);